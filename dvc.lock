schema: '2.0'
stages:
  clean_data:
    cmd: echo "smiles,ames" > data/model_input.csv && awk '{print $1","$3}' amesdata/smiles_cas_N6512.smi
      >> data/model_input.csv
    deps:
    - path: amesdata/smiles_cas_N6512.smi
      md5: aa408bcd82c3f98d086c9d63c38aa488
      size: 301832
    outs:
    - path: data/model_input.csv
      md5: ef66b73ac862dc35d0d40dca303ec819
      size: 222250
  feature_generation:
    cmd: python src/generate_descriptors.py data/model_input.csv data/features.csv
      data/targets.csv
    deps:
    - path: data/model_input.csv
      md5: 46af28613258081f9d416935f8007088
      size: 254646
    - path: src/generate_descriptors.py
      md5: 51f871f5f5d8f5faa5730e647a766b71
      size: 2140
    outs:
    - path: data/features.csv
      md5: 555e23a636e340201942abbf36b00248
      size: 409023637
    - path: data/targets.csv
      md5: 08ce771a6b2e8545ee77e474ddd4f765
      size: 14561
  training:
    cmd: python src/train.py data/targets.csv data/features.csv 0.1 data/model.pkl
      data/metrics.json
    deps:
    - path: data/features.csv
      md5: 555e23a636e340201942abbf36b00248
      size: 409023637
    - path: data/model_input.csv
      md5: 46af28613258081f9d416935f8007088
      size: 254646
    - path: src/train.py
      md5: e6c5e72f53fe0fbfe177297635097137
      size: 1608
    outs:
    - path: data/metrics.json
      md5: bee191459a353cf42eac9bffd9991e11
      size: 54
    - path: data/model.pkl
      md5: f65ac9aaf6a385f5750449883d5a64ea
      size: 42673756
