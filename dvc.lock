schema: '2.0'
stages:
  clean_data:
    cmd: echo "smiles,ames" > data/model_input.csv && awk '{print $1","$3}' amesdata/smiles_cas_N6512.smi
      | sort -R >> data/model_input.csv
    deps:
    - path: amesdata/smiles_cas_N6512.smi
      md5: aa408bcd82c3f98d086c9d63c38aa488
      size: 301832
    outs:
    - path: data/model_input.csv
      md5: 4555b0ee296be424a3341817988a18af
      size: 222250
  feature_generation:
    cmd: python src/generate_descriptors.py data/model_input.csv data/features.csv
      data/targets.csv
    deps:
    - path: data/model_input.csv
      md5: 4555b0ee296be424a3341817988a18af
      size: 222250
    - path: src/generate_descriptors.py
      md5: 6820599bfcbc16629d2c874999730f82
      size: 2243
    outs:
    - path: data/features.csv
      md5: 2a4a5e290999c1df5f5188df395d195e
      size: 32530000
    - path: data/targets.csv
      md5: 58bb35aa38ee8c7e12bd17408d0e2c6b
      size: 222069
  training:
    cmd: python src/train.py data/targets.csv data/features.csv 0.2 data/model.pkl
      data/metrics.json --num-samples 500
    deps:
    - path: data/features.csv
      md5: 2a4a5e290999c1df5f5188df395d195e
      size: 32530000
    - path: data/model_input.csv
      md5: 4555b0ee296be424a3341817988a18af
      size: 222250
    - path: src/train.py
      md5: 706a2a309b62943689e8b5efd3e19724
      size: 1723
    outs:
    - path: data/metrics.json
      md5: 2363c78ab7dba59b8443d958b47cfa2b
      size: 4
    - path: data/model.pkl
      md5: 1913e7b069b032891b8a1eac1c695541
      size: 346800
